<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width" />
        <title>Assignment 01</title>
        <script type="text/javascript">
            var currentDiv = 1;
            var currentName;

            function validateName()
            {
                var userName = document.getElementById("userName");
                var error = document.getElementById("error");
                if ((userName.value.trim()).length == 0)
                {
                    error.innerHTML = "Your name <b>cannot</b> be BLANK.";
                    return;
                }
                var lettersNSpaces = /^[A-Za-z\s]+$/;
                if(!userName.value.match(lettersNSpaces))
                {
                    error.innerHTML = "Your name must be made of <b>alpha</b> characters <u>only</u>.";
                    return;
                }
                error.innerHTML = "";

                if(currentDiv == 1)
                {
                    document.getElementById("section1").style.display = "none";
		            document.getElementById("section2").style.display = "block";
                    currentDiv = 2;
                    currentName = userName.value;
                }
            }

            var minNum = 1;
            var maxNum = 999;
            var randomValue;

            function validateMaxNumber()
            {
                var maxNumber = document.getElementById("maxNumber");
                var error = document.getElementById("error");
                var maxValue = maxNumber.value;
                if((maxValue < 1) || (maxValue > 999))
                {
                    error.innerHTML = "The number <b>must</b> between 1 and 999.";
                    return;
                }
                error.innerHTML = "";
                
                if(currentDiv == 2)
                {
                    document.getElementById("section2").style.display = "none";
		            document.getElementById("section3").style.display = "block";
                    currentDiv = 3;

                    maxNum = maxValue;
                    document.getElementById("guessNumberLabel").textContent = currentName + ", guess a number("+minNum+" - "+maxNum+")";
                    maxNumber.value = "";
                    randomValue = Math.floor(Math.random() * maxNum) + minNum;
                }
            }
        
            function validateGuessNumber()
            {
                var guessNumber = document.getElementById("guessNumber");
                var error = document.getElementById("error");
                var guessValue = parseInt(guessNumber.value);
                if((guessValue < minNum) || (guessValue > maxNum))
                {
                    error.innerHTML = "The number <b>must</b> between " + minNum + " and " + maxNum + ".";
                    return;
                }
                error.innerHTML = "";
                
                console.log("Guess:" + guessValue + typeof(guessValue));
                console.log("Random:"+ randomValue + typeof(randomValue));
                
                if (guessValue < randomValue)
                {
                    minNum = guessValue + 1;
                    guessNumber.value = ""
                    document.getElementById("guessNumberLabel").textContent = currentName + ", guess a number(" + minNum + " - "+maxNum+")";
                }
                else if (guessValue > randomValue)
                {
                    maxNum = guessValue - 1;
                    guessNumber.value = ""
                    document.getElementById("guessNumberLabel").textContent = currentName + ", guess a number(" + minNum + " - "+maxNum+")";
                }
                else
                {
                    document.getElementById("section3").style.display = "none";
		            document.getElementById("section4").style.display = "block";
                    currentDiv = 4;
                    guessNumber.value = ""
                }
            }

            function playAgain()
            {
                document.getElementById("section4").style.display = "none";
		        document.getElementById("section2").style.display = "block";
                currentDiv = 2;
                minNum = 1;
                maxNum = 999;
            }
        </script>
    </head>
    <body>
        <div id="section1">
            <label for="userName">Please enter your name</label>
            <input type="text" id="userName" name="userName"/>
            <button onclick="validateName();">confirm</button>
        </div>
        <div id="section2" style="display:none">
            <label for="maxNumber">Enter a number(1~999)</label>
            <input type="number" id="maxNumber" name="maxNumber"/>
            <button onclick="validateMaxNumber();">confirm</button>
        </div>
        <div id="section3" style="display:none">
            <label id="guessNumberLabel" for="guessNumber"></label>
            <input type="number" id="guessNumber" name="guessNumber"/>
            <button onclick="validateGuessNumber();">confirm</button>
        </div>
        <div id="section4" style="display:none; background-color:green;">
            <div>Congradulations</div>
            <button onclick="playAgain();">Play Again</button>
        </div>
        <div id="error" style="color:red;"></div>
    </body>
</html>